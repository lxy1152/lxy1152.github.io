(window.webpackJsonp=window.webpackJsonp||[]).push([[96],{726:function(s,t,a){"use strict";a.r(t);var e=a(1),i=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"hashmap-涉及的名词概念有哪些"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hashmap-涉及的名词概念有哪些"}},[s._v("#")]),s._v(" HashMap 涉及的名词概念有哪些？"),a("Badge",{attrs:{text:"重点",type:"error"}})],1),s._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center"}},[s._v("英文名称")]),s._v(" "),a("th",{staticStyle:{"text-align":"center"}},[s._v("中文名称")]),s._v(" "),a("th",{staticStyle:{"text-align":"center"}},[s._v("含义")])])]),s._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"center"}},[s._v("CAPACITY")]),s._v(" "),a("td",{staticStyle:{"text-align":"center"}},[s._v("容量")]),s._v(" "),a("td",{staticStyle:{"text-align":"center"}},[s._v("哈希表中桶（数组中的每个索引位置）的数量（数组大小），默认为 16，设计成 16 的好处主要是可以使用与运算替代求余来提升计算哈希值的速度")])]),s._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[s._v("LOAD_FACTOR")]),s._v(" "),a("td",{staticStyle:{"text-align":"center"}},[s._v("加载因子")]),s._v(" "),a("td",{staticStyle:{"text-align":"center"}},[s._v("加载因子用来衡量哈希表满的程度，它的默认值为 0.75f，计算实时加载因子的方法为："),a("span",{staticClass:"katex"},[a("span",{staticClass:"katex-mathml"},[a("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[a("semantics",[a("mrow",[a("mi",[s._v("s")]),a("mi",[s._v("i")]),a("mi",[s._v("z")]),a("mi",[s._v("e")]),a("mi",{attrs:{mathvariant:"normal"}},[s._v("/")]),a("mi",[s._v("c")]),a("mi",[s._v("a")]),a("mi",[s._v("p")]),a("mi",[s._v("a")]),a("mi",[s._v("c")]),a("mi",[s._v("i")]),a("mi",[s._v("t")]),a("mi",[s._v("y")])],1),a("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("size/capacity")])],1)],1)],1),a("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[a("span",{staticClass:"base"},[a("span",{staticClass:"strut",staticStyle:{height:"1em","vertical-align":"-0.25em"}}),a("span",{staticClass:"mord mathnormal"},[s._v("s")]),a("span",{staticClass:"mord mathnormal"},[s._v("i")]),a("span",{staticClass:"mord mathnormal"},[s._v("ze")]),a("span",{staticClass:"mord"},[s._v("/")]),a("span",{staticClass:"mord mathnormal"},[s._v("c")]),a("span",{staticClass:"mord mathnormal"},[s._v("a")]),a("span",{staticClass:"mord mathnormal"},[s._v("p")]),a("span",{staticClass:"mord mathnormal"},[s._v("a")]),a("span",{staticClass:"mord mathnormal"},[s._v("c")]),a("span",{staticClass:"mord mathnormal"},[s._v("i")]),a("span",{staticClass:"mord mathnormal"},[s._v("t")]),a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.03588em"}},[s._v("y")])])])]),s._v(" ，而不是占用桶的数量去除以 CAPACITY")])]),s._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[s._v("SIZE")]),s._v(" "),a("td",{staticStyle:{"text-align":"center"}},[s._v("键值对数量")]),s._v(" "),a("td",{staticStyle:{"text-align":"center"}},[s._v("哈希表中保存的键值对的数量")])]),s._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[s._v("THRESHOLD")]),s._v(" "),a("td",{staticStyle:{"text-align":"center"}},[s._v("阈值")]),s._v(" "),a("td",{staticStyle:{"text-align":"center"}},[s._v("当 SIZE 大于设定的这个阈值后，哈希表会进行扩容")])]),s._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[s._v("DEFAULT_INITIAL_CAPACITY")]),s._v(" "),a("td",{staticStyle:{"text-align":"center"}},[s._v("初始容量")]),s._v(" "),a("td",{staticStyle:{"text-align":"center"}},[s._v("初始容量为 16，而且容量必须为 "),a("span",{staticClass:"katex"},[a("span",{staticClass:"katex-mathml"},[a("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[a("semantics",[a("mrow",[a("msup",[a("mn",[s._v("2")]),a("mi",[s._v("n")])],1)],1),a("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("2^n")])],1)],1)],1),a("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[a("span",{staticClass:"base"},[a("span",{staticClass:"strut",staticStyle:{height:"0.664392em","vertical-align":"0em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[s._v("2")]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.664392em"}},[a("span",{staticStyle:{top:"-3.063em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mathnormal mtight"},[s._v("n")])])])])])])])])])])]),s._v("，如果不是也会通过其他方法转换为 "),a("span",{staticClass:"katex"},[a("span",{staticClass:"katex-mathml"},[a("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[a("semantics",[a("mrow",[a("msup",[a("mn",[s._v("2")]),a("mi",[s._v("n")])],1)],1),a("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("2^n")])],1)],1)],1),a("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[a("span",{staticClass:"base"},[a("span",{staticClass:"strut",staticStyle:{height:"0.664392em","vertical-align":"0em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[s._v("2")]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.664392em"}},[a("span",{staticStyle:{top:"-3.063em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mathnormal mtight"},[s._v("n")])])])])])])])])])])])])]),s._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[s._v("MAXIMUM_CAPACITY")]),s._v(" "),a("td",{staticStyle:{"text-align":"center"}},[s._v("最大容量")]),s._v(" "),a("td",{staticStyle:{"text-align":"center"}},[s._v("最大的容量大小为 "),a("span",{staticClass:"katex"},[a("span",{staticClass:"katex-mathml"},[a("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[a("semantics",[a("mrow",[a("msup",[a("mn",[s._v("2")]),a("mn",[s._v("30")])],1)],1),a("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("2^{30}")])],1)],1)],1),a("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[a("span",{staticClass:"base"},[a("span",{staticClass:"strut",staticStyle:{height:"0.8141079999999999em","vertical-align":"0em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[s._v("2")]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.8141079999999999em"}},[a("span",{staticStyle:{top:"-3.063em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mtight"},[s._v("30")])])])])])])])])])])])])])]),s._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[s._v("TREEIFY_THRESHOLD")]),s._v(" "),a("td",{staticStyle:{"text-align":"center"}},[s._v("树化阈值")]),s._v(" "),a("td",{staticStyle:{"text-align":"center"}},[s._v("当链表长度大于 8 时（且同时大于 MIN_TREEIFY_CAPACITY 时），就会将链表转化为红黑树")])]),s._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[s._v("UNTREEiFY_THRESHOLD")]),s._v(" "),a("td",{staticStyle:{"text-align":"center"}},[s._v("退化阈值")]),s._v(" "),a("td",{staticStyle:{"text-align":"center"}},[s._v("当树的节点数量小于 6 时，就会将红黑树重新转化为链表")])]),s._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[s._v("MIN_TREEIFY_CAPACITY")]),s._v(" "),a("td",{staticStyle:{"text-align":"center"}},[s._v("最小树化容量")]),s._v(" "),a("td",{staticStyle:{"text-align":"center"}},[s._v("只有 SIZE 大于这个值并且链表长度大于 8 时，才会进行转换，之所以这么设定是因为：如果总的键值对数量太少，并且依然有冲突，那么转换红黑树是治标不治本的解决方案，直接进行扩容的效果会更好")])])])]),s._v(" "),a("h2",{attrs:{id:"hashmap-的底层存储结构"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hashmap-的底层存储结构"}},[s._v("#")]),s._v(" HashMap 的底层存储结构？"),a("Badge",{attrs:{text:"重点",type:"error"}})],1),s._v(" "),a("p",[s._v("在 "),a("code",[s._v("HashMap")]),s._v(" 类中使用了一个 "),a("code",[s._v("Node")]),s._v(" 类型的数组 "),a("code",[s._v("table")]),s._v("，通过 "),a("code",[s._v("Node")]),s._v(" 类中的 "),a("code",[s._v("next")]),s._v(" 属性可知它是一个链表，即：数组的每个位置被当作一个桶，一个桶存放一个链表。当链表的长度大于 "),a("code",[s._v("TREEIFY_THRESHOLD")]),s._v(" 并且桶的数量大于 "),a("code",[s._v("MIN_TREEIFY_CAPACITY")]),s._v("，那么会将链表转化为红黑树，每个节点使用 "),a("code",[s._v("TreeNode")]),s._v(" 类表示树节点。因此在整体上，"),a("code",[s._v("HashMap")]),s._v(" 是使用数组+链表+红黑树的结构来存储数据的。")]),s._v(" "),a("h2",{attrs:{id:"如何计算哈希值"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何计算哈希值"}},[s._v("#")]),s._v(" 如何计算哈希值？")]),s._v(" "),a("p",[s._v("以下是 "),a("code",[s._v("HashMap")]),s._v(" 类的静态方法 "),a("code",[s._v("hash()")]),s._v(" 的实现：")]),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("hash")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),s._v(" key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" h"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("key "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("h "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("hashCode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("^")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("h "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>>")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("可以看到，"),a("code",[s._v("HashMap")]),s._v(" 并没有直接使用 "),a("code",[s._v("key")]),s._v(" 的哈希值，而是将键的哈希值的低 16 位与高 16 位的异或结果作为哈希值。举例：")]),s._v(" "),a("p",{staticClass:"katex-block"},[a("span",{staticClass:"katex-display"},[a("span",{staticClass:"katex"},[a("span",{staticClass:"katex-mathml"},[a("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"}},[a("semantics",[a("mtable",{attrs:{rowspacing:"0.2500em",columnalign:"right left",columnspacing:"0em"}},[a("mtr",[a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow",[a("mi",[s._v("h")]),a("mo",[s._v("=")]),a("mi",[s._v("h")]),a("mi",[s._v("a")]),a("mi",[s._v("s")]),a("mi",[s._v("h")]),a("mi",[s._v("C")]),a("mi",[s._v("o")]),a("mi",[s._v("d")]),a("mi",[s._v("e")]),a("mo",{attrs:{stretchy:"false"}},[s._v("(")]),a("mo",{attrs:{stretchy:"false"}},[s._v(")")]),a("mo",[s._v(":")])],1)],1)],1),a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow",[a("mrow"),a("mtext"),a("mn",[s._v("1111")]),a("mtext"),a("mn",[s._v("1111")]),a("mtext"),a("mn",[s._v("1111")]),a("mtext"),a("mn",[s._v("1111")]),a("mtext"),a("mn",[s._v("1111")]),a("mtext"),a("mn",[s._v("0000")]),a("mtext"),a("mn",[s._v("1110")]),a("mtext"),a("mn",[s._v("1010")])],1)],1)],1)],1),a("mtr",[a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mo",{attrs:{lspace:"0em",rspace:"0em"}},[s._v("↓")])],1)],1)],1),a("mtr",[a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow",[a("mi",[s._v("h")]),a("mtext",[s._v(" >>> ")]),a("mn",[s._v("16")]),a("mo",[s._v(":")])],1)],1)],1),a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow",[a("mrow"),a("mtext"),a("mn",[s._v("0000")]),a("mtext"),a("mn",[s._v("0000")]),a("mtext"),a("mn",[s._v("0000")]),a("mtext"),a("mn",[s._v("0000")]),a("mtext"),a("mn",[s._v("1111")]),a("mtext"),a("mn",[s._v("1111")]),a("mtext"),a("mn",[s._v("1111")]),a("mtext"),a("mn",[s._v("1111")])],1)],1)],1)],1),a("mtr",[a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mo",{attrs:{lspace:"0em",rspace:"0em"}},[s._v("↓")])],1)],1)],1),a("mtr",[a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow",[a("mi",[s._v("h")]),a("mi",[s._v("a")]),a("mi",[s._v("s")]),a("mi",[s._v("h")]),a("mo",[s._v("=")]),a("mi",[s._v("h")]),a("mtext",[s._v("^")]),a("mo",{attrs:{stretchy:"false"}},[s._v("(")]),a("mi",[s._v("h")]),a("mtext",[s._v(">>>")]),a("mn",[s._v("16")]),a("mo",{attrs:{stretchy:"false"}},[s._v(")")]),a("mo",[s._v(":")])],1)],1)],1),a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow",[a("mrow"),a("mtext"),a("mn",[s._v("1111")]),a("mtext"),a("mn",[s._v("1111")]),a("mtext"),a("mn",[s._v("1111")]),a("mtext"),a("mn",[s._v("1111")]),a("mtext"),a("mn",[s._v("0000")]),a("mtext"),a("mn",[s._v("1111")]),a("mtext"),a("mn",[s._v("0001")]),a("mtext"),a("mn",[s._v("0101")])],1)],1)],1)],1)],1),a("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("\\begin{aligned}\nh=hashCode():&\\ 1111\\ 1111\\ 1111\\ 1111\\ 1111\\ 0000\\ 1110\\ 1010\\\\\n\\downarrow\\\\\nh\\ \\text{>>>}\\ 16:&\\ 0000\\ 0000\\ 0000\\ 0000\\ 1111\\ 1111\\ 1111\\ 1111\\\\\n\\downarrow\\\\\nhash=h \\text{\\textasciicircum} (h \\text{>>>} 16):&\\ 1111\\ 1111\\ 1111\\ 1111\\ 0000\\ 1111\\ 0001\\ 0101\n\\end{aligned}\n")])],1)],1)],1),a("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[a("span",{staticClass:"base"},[a("span",{staticClass:"strut",staticStyle:{height:"7.500000000000002em","vertical-align":"-3.5000000000000018em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mtable"},[a("span",{staticClass:"col-align-r"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"4em"}},[a("span",{staticStyle:{top:"-6.16em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathnormal"},[s._v("h")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mrel"},[s._v("=")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mord mathnormal"},[s._v("ha")]),a("span",{staticClass:"mord mathnormal"},[s._v("s")]),a("span",{staticClass:"mord mathnormal"},[s._v("h")]),a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.07153em"}},[s._v("C")]),a("span",{staticClass:"mord mathnormal"},[s._v("o")]),a("span",{staticClass:"mord mathnormal"},[s._v("d")]),a("span",{staticClass:"mord mathnormal"},[s._v("e")]),a("span",{staticClass:"mopen"},[s._v("(")]),a("span",{staticClass:"mclose"},[s._v(")")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mrel"},[s._v(":")])])]),a("span",{staticStyle:{top:"-4.659999999999999em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mrel"},[s._v("↓")])])]),a("span",{staticStyle:{top:"-3.1599999999999984em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathnormal"},[s._v("h")]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mord text"},[a("span",{staticClass:"mord"},[s._v(">>>")])]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mord"},[s._v("16")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mrel"},[s._v(":")])])]),a("span",{staticStyle:{top:"-1.6599999999999984em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mrel"},[s._v("↓")])])]),a("span",{staticStyle:{top:"-0.15999999999999837em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathnormal"},[s._v("ha")]),a("span",{staticClass:"mord mathnormal"},[s._v("s")]),a("span",{staticClass:"mord mathnormal"},[s._v("h")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mrel"},[s._v("=")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mord mathnormal"},[s._v("h")]),a("span",{staticClass:"mord text"},[a("span",{staticClass:"mord"},[s._v("^")])]),a("span",{staticClass:"mopen"},[s._v("(")]),a("span",{staticClass:"mord mathnormal"},[s._v("h")]),a("span",{staticClass:"mord text"},[a("span",{staticClass:"mord"},[s._v(">>>")])]),a("span",{staticClass:"mord"},[s._v("16")]),a("span",{staticClass:"mclose"},[s._v(")")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mrel"},[s._v(":")])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"3.5000000000000018em"}},[a("span")])])])]),a("span",{staticClass:"col-align-l"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"4em"}},[a("span",{staticStyle:{top:"-6.16em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"}),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mord"},[s._v("1111")]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mord"},[s._v("1111")]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mord"},[s._v("1111")]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mord"},[s._v("1111")]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mord"},[s._v("1111")]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mord"},[s._v("0000")]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mord"},[s._v("1110")]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mord"},[s._v("1010")])])]),a("span",{staticStyle:{top:"-3.1599999999999993em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"}),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mord"},[s._v("0000")]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mord"},[s._v("0000")]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mord"},[s._v("0000")]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mord"},[s._v("0000")]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mord"},[s._v("1111")]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mord"},[s._v("1111")]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mord"},[s._v("1111")]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mord"},[s._v("1111")])])]),a("span",{staticStyle:{top:"-0.15999999999999925em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"}),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mord"},[s._v("1111")]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mord"},[s._v("1111")]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mord"},[s._v("1111")]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mord"},[s._v("1111")]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mord"},[s._v("0000")]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mord"},[s._v("1111")]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mord"},[s._v("0001")]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mord"},[s._v("0101")])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"3.500000000000001em"}},[a("span")])])])])])])])])])])]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("为什么要用这种方式来算哈希值")]),s._v(" "),a("p",[s._v("首先需要注意的是，代码中使用的是无符号右移，右移后结果的高 16 位一定全是 0，一个数和 0 异或，结果还是自身，所以原数据的高 16 位将会保留，从而实现高 16 位与低 16 位进行异或运算。")]),s._v(" "),a("p",[s._v("下面来说一下为什么要这么计算。"),a("code",[s._v("HashMap")]),s._v(" 在计算索引时是采用 "),a("code",[s._v("(n - 1) & hash")]),s._v(" （"),a("code",[s._v("n")]),s._v(" 表示 "),a("code",[s._v("table")]),s._v(" 数组的长度）的方式来计算的，假设 "),a("code",[s._v("n = 16")]),s._v("，那么这个位运算的结果是：")]),s._v(" "),a("p",{staticClass:"katex-block"},[a("span",{staticClass:"katex-display"},[a("span",{staticClass:"katex"},[a("span",{staticClass:"katex-mathml"},[a("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"}},[a("semantics",[a("mtable",{attrs:{rowspacing:"0.2500em",columnalign:"right left",columnspacing:"0em"}},[a("mtr",[a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow",[a("mi",[s._v("n")]),a("mo",[s._v("−")]),a("mn",[s._v("1")]),a("mo",[s._v(":")])],1)],1)],1),a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow",[a("mrow"),a("mtext"),a("mn",[s._v("0000")]),a("mtext"),a("mn",[s._v("0000")]),a("mtext"),a("mn",[s._v("0000")]),a("mtext"),a("mn",[s._v("0000")]),a("mtext"),a("mn",[s._v("0000")]),a("mtext"),a("mn",[s._v("0000")]),a("mtext"),a("mn",[s._v("0000")]),a("mtext"),a("mn",[s._v("1111")])],1)],1)],1)],1),a("mtr",[a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow",[a("mi",[s._v("h")]),a("mi",[s._v("a")]),a("mi",[s._v("s")]),a("mi",[s._v("h")]),a("mo",[s._v(":")])],1)],1)],1),a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow",[a("mrow"),a("mtext"),a("mn",[s._v("1111")]),a("mtext"),a("mn",[s._v("1111")]),a("mtext"),a("mn",[s._v("1111")]),a("mtext"),a("mn",[s._v("1111")]),a("mtext"),a("mn",[s._v("0000")]),a("mtext"),a("mn",[s._v("1111")]),a("mtext"),a("mn",[s._v("0001")]),a("mtext"),a("mn",[s._v("0101")])],1)],1)],1)],1),a("mtr",[a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mo",{attrs:{lspace:"0em",rspace:"0em"}},[s._v("↓")])],1)],1)],1),a("mtr",[a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow",[a("mi",[s._v("r")]),a("mi",[s._v("e")]),a("mi",[s._v("s")]),a("mi",[s._v("u")]),a("mi",[s._v("l")]),a("mi",[s._v("t")]),a("mo",[s._v(":")])],1)],1)],1),a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow",[a("mrow"),a("mtext"),a("mn",[s._v("0101")]),a("mtext"),a("mo",[s._v("=")]),a("mtext"),a("mn",[s._v("5")])],1)],1)],1)],1)],1),a("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("\\begin{aligned}\nn - 1:&\\ 0000\\ 0000\\ 0000\\ 0000\\ 0000\\ 0000\\ 0000\\ 1111\\\\\nhash:& \\ 1111\\ 1111\\ 1111\\ 1111\\ 0000\\ 1111\\ 0001\\ 0101\\\\\n\\downarrow\\\\\nresult:&\\ 0101\\ =\\ 5\n\\end{aligned}\n")])],1)],1)],1),a("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[a("span",{staticClass:"base"},[a("span",{staticClass:"strut",staticStyle:{height:"6.000000000000001em","vertical-align":"-2.750000000000001em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mtable"},[a("span",{staticClass:"col-align-r"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"3.25em"}},[a("span",{staticStyle:{top:"-5.41em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathnormal"},[s._v("n")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),a("span",{staticClass:"mbin"},[s._v("−")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),a("span",{staticClass:"mord"},[s._v("1")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mrel"},[s._v(":")])])]),a("span",{staticStyle:{top:"-3.91em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathnormal"},[s._v("ha")]),a("span",{staticClass:"mord mathnormal"},[s._v("s")]),a("span",{staticClass:"mord mathnormal"},[s._v("h")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mrel"},[s._v(":")])])]),a("span",{staticStyle:{top:"-2.4099999999999993em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mrel"},[s._v("↓")])])]),a("span",{staticStyle:{top:"-0.9099999999999997em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathnormal"},[s._v("res")]),a("span",{staticClass:"mord mathnormal"},[s._v("u")]),a("span",{staticClass:"mord mathnormal"},[s._v("lt")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mrel"},[s._v(":")])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"2.7500000000000004em"}},[a("span")])])])]),a("span",{staticClass:"col-align-l"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"3.25em"}},[a("span",{staticStyle:{top:"-5.41em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"}),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mord"},[s._v("0000")]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mord"},[s._v("0000")]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mord"},[s._v("0000")]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mord"},[s._v("0000")]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mord"},[s._v("0000")]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mord"},[s._v("0000")]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mord"},[s._v("0000")]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mord"},[s._v("1111")])])]),a("span",{staticStyle:{top:"-3.91em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"}),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mord"},[s._v("1111")]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mord"},[s._v("1111")]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mord"},[s._v("1111")]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mord"},[s._v("1111")]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mord"},[s._v("0000")]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mord"},[s._v("1111")]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mord"},[s._v("0001")]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mord"},[s._v("0101")])])]),a("span",{staticStyle:{top:"-0.9099999999999993em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"}),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mord"},[s._v("0101")]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mrel"},[s._v("=")]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mord"},[s._v("5")])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"2.750000000000001em"}},[a("span")])])])])])])])])])])]),s._v(" "),a("p",[s._v("因为使用的是与运算，所以 "),a("code",[s._v("hash")]),s._v(" 的高位将全部忽略，在 "),a("code",[s._v("n")]),s._v(" 比较小时，很容易发生碰撞，因此最终采用了上面所说的方式来计算哈希。")]),s._v(" "),a("p",[s._v("注意：因为容量是 "),a("span",{staticClass:"katex"},[a("span",{staticClass:"katex-mathml"},[a("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[a("semantics",[a("mrow",[a("msup",[a("mn",[s._v("2")]),a("mi",[s._v("n")])],1)],1),a("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("2^n")])],1)],1)],1),a("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[a("span",{staticClass:"base"},[a("span",{staticClass:"strut",staticStyle:{height:"0.664392em","vertical-align":"0em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[s._v("2")]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.664392em"}},[a("span",{staticStyle:{top:"-3.063em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mathnormal mtight"},[s._v("n")])])])])])])])])])])]),s._v("，所以求余操作可以被转化为与运算（因为他们的处理结果相同）。相比求余运算而言，与运算肯定执行效率更高，这也是为什么强制要求容量是 "),a("span",{staticClass:"katex"},[a("span",{staticClass:"katex-mathml"},[a("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[a("semantics",[a("mrow",[a("msup",[a("mn",[s._v("2")]),a("mi",[s._v("n")])],1)],1),a("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("2^n")])],1)],1)],1),a("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[a("span",{staticClass:"base"},[a("span",{staticClass:"strut",staticStyle:{height:"0.664392em","vertical-align":"0em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[s._v("2")]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.664392em"}},[a("span",{staticStyle:{top:"-3.063em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mathnormal mtight"},[s._v("n")])])])])])])])])])])]),s._v("。")])]),s._v(" "),a("h2",{attrs:{id:"hashmap-如何计算初始容量"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hashmap-如何计算初始容量"}},[s._v("#")]),s._v(" HashMap 如何计算初始容量？")]),s._v(" "),a("p",[a("code",[s._v("HashMap")]),s._v(" 允许通过构造器传入一个自定义的初始容量，但由于容量只能设定为 "),a("span",{staticClass:"katex"},[a("span",{staticClass:"katex-mathml"},[a("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[a("semantics",[a("mrow",[a("msup",[a("mn",[s._v("2")]),a("mi",[s._v("n")])],1)],1),a("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("2^n")])],1)],1)],1),a("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[a("span",{staticClass:"base"},[a("span",{staticClass:"strut",staticStyle:{height:"0.664392em","vertical-align":"0em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[s._v("2")]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.664392em"}},[a("span",{staticStyle:{top:"-3.063em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mathnormal mtight"},[s._v("n")])])])])])])])])])])]),s._v("，因此需要做转换。通过静态方法 "),a("code",[s._v("tableSizeFor()")]),s._v(" 可以将任意一个容量转换为离它最近的一个 "),a("span",{staticClass:"katex"},[a("span",{staticClass:"katex-mathml"},[a("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[a("semantics",[a("mrow",[a("msup",[a("mn",[s._v("2")]),a("mi",[s._v("n")])],1)],1),a("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("2^n")])],1)],1)],1),a("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[a("span",{staticClass:"base"},[a("span",{staticClass:"strut",staticStyle:{height:"0.664392em","vertical-align":"0em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[s._v("2")]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.664392em"}},[a("span",{staticStyle:{top:"-3.063em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mathnormal mtight"},[s._v("n")])])])])])])])])])])]),s._v("。代码如下：")]),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tableSizeFor")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" cap"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" n "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" cap "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    n "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|=")]),s._v(" n "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>>")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    n "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|=")]),s._v(" n "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>>")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    n "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|=")]),s._v(" n "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>>")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    n "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|=")]),s._v(" n "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>>")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    n "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|=")]),s._v(" n "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>>")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("n "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("n "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">=")]),s._v(" MAXIMUM_CAPACITY"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),s._v(" MAXIMUM_CAPACITY "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" n "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("p",[s._v("以 "),a("code",[s._v("cap=10")]),s._v(" 为例，理解一下这段代码的逻辑：")]),s._v(" "),a("p",{staticClass:"katex-block"},[a("span",{staticClass:"katex-display"},[a("span",{staticClass:"katex"},[a("span",{staticClass:"katex-mathml"},[a("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"}},[a("semantics",[a("mtable",{attrs:{rowspacing:"0.2500em",columnalign:"right left",columnspacing:"0em"}},[a("mtr",[a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow",[a("mi",[s._v("n")]),a("mtext")],1)],1)],1),a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow",[a("mrow"),a("mo",[s._v("=")]),a("mtext"),a("mn",[s._v("0000")]),a("mtext"),a("mn",[s._v("1001")])],1)],1)],1)],1),a("mtr",[a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mo",{attrs:{lspace:"0em",rspace:"0em"}},[s._v("↓")])],1)],1)],1),a("mtr",[a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow",[a("mi",[s._v("n")]),a("mtext",[s._v(" >>> ")]),a("mn",[s._v("1")]),a("mtext")],1)],1)],1),a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow",[a("mrow"),a("mo",[s._v("=")]),a("mtext"),a("mn",[s._v("0000")]),a("mtext"),a("mn",[s._v("0100")])],1)],1)],1)],1),a("mtr",[a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow",[a("mi",[s._v("n")]),a("mtext"),a("mi",{attrs:{mathvariant:"normal"}},[s._v("∣")]),a("mtext"),a("mi",[s._v("n")]),a("mtext",[s._v(" >>> ")]),a("mn",[s._v("1")]),a("mtext")],1)],1)],1),a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow",[a("mrow"),a("mo",[s._v("=")]),a("mtext"),a("mn",[s._v("0000")]),a("mtext"),a("mn",[s._v("1101")])],1)],1)],1)],1),a("mtr",[a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow",[a("mi",[s._v("n")]),a("mtext")],1)],1)],1),a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow",[a("mrow"),a("mo",[s._v("=")]),a("mtext"),a("mn",[s._v("0000")]),a("mtext"),a("mn",[s._v("1101")])],1)],1)],1)],1),a("mtr",[a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mo",{attrs:{lspace:"0em",rspace:"0em"}},[s._v("↓")])],1)],1)],1),a("mtr",[a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow",[a("mi",[s._v("n")]),a("mtext",[s._v(" >>> ")]),a("mn",[s._v("2")]),a("mtext")],1)],1)],1),a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow",[a("mrow"),a("mo",[s._v("=")]),a("mtext"),a("mn",[s._v("0000")]),a("mtext"),a("mn",[s._v("0011")])],1)],1)],1)],1),a("mtr",[a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow",[a("mi",[s._v("n")]),a("mtext"),a("mi",{attrs:{mathvariant:"normal"}},[s._v("∣")]),a("mtext"),a("mi",[s._v("n")]),a("mtext",[s._v(" >>> ")]),a("mn",[s._v("2")]),a("mtext")],1)],1)],1),a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow",[a("mrow"),a("mo",[s._v("=")]),a("mtext"),a("mn",[s._v("0000")]),a("mtext"),a("mn",[s._v("1111")])],1)],1)],1)],1),a("mtr",[a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow",[a("mi",[s._v("n")]),a("mtext")],1)],1)],1),a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow",[a("mrow"),a("mo",[s._v("=")]),a("mtext"),a("mn",[s._v("0000")]),a("mtext"),a("mn",[s._v("1111")])],1)],1)],1)],1),a("mtr",[a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mo",{attrs:{lspace:"0em",rspace:"0em"}},[s._v("↓")])],1)],1)],1),a("mtr",[a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow",[a("mi",[s._v("n")]),a("mtext",[s._v(" >>> ")]),a("mn",[s._v("4")]),a("mtext")],1)],1)],1),a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow",[a("mrow"),a("mo",[s._v("=")]),a("mtext"),a("mn",[s._v("0000")]),a("mtext"),a("mn",[s._v("0000")])],1)],1)],1)],1),a("mtr",[a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow",[a("mi",[s._v("n")]),a("mtext"),a("mi",{attrs:{mathvariant:"normal"}},[s._v("∣")]),a("mtext"),a("mi",[s._v("n")]),a("mtext",[s._v(" >>> ")]),a("mn",[s._v("4")]),a("mtext")],1)],1)],1),a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow",[a("mrow"),a("mo",[s._v("=")]),a("mtext"),a("mn",[s._v("0000")]),a("mtext"),a("mn",[s._v("1111")])],1)],1)],1)],1),a("mtr",[a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow",[a("mi",[s._v("n")]),a("mtext")],1)],1)],1),a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow",[a("mrow"),a("mo",[s._v("=")]),a("mtext"),a("mn",[s._v("0000")]),a("mtext"),a("mn",[s._v("1111")])],1)],1)],1)],1),a("mtr",[a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mo",{attrs:{lspace:"0em",rspace:"0em"}},[s._v("↓")])],1)],1)],1),a("mtr",[a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow",[a("mi",[s._v("n")]),a("mtext",[s._v(" >>> ")]),a("mn",[s._v("8")]),a("mtext")],1)],1)],1),a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow",[a("mrow"),a("mo",[s._v("=")]),a("mtext"),a("mn",[s._v("0000")]),a("mtext"),a("mn",[s._v("0000")])],1)],1)],1)],1),a("mtr",[a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow",[a("mi",[s._v("n")]),a("mtext"),a("mi",{attrs:{mathvariant:"normal"}},[s._v("∣")]),a("mtext"),a("mi",[s._v("n")]),a("mtext",[s._v(" >>> ")]),a("mn",[s._v("8")]),a("mtext")],1)],1)],1),a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow",[a("mrow"),a("mo",[s._v("=")]),a("mtext"),a("mn",[s._v("0000")]),a("mtext"),a("mn",[s._v("1111")])],1)],1)],1)],1),a("mtr",[a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow",[a("mi",[s._v("n")]),a("mtext")],1)],1)],1),a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow",[a("mrow"),a("mo",[s._v("=")]),a("mtext"),a("mn",[s._v("0000")]),a("mtext"),a("mn",[s._v("1111")])],1)],1)],1)],1),a("mtr",[a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow",[a("mi",[s._v("r")]),a("mi",[s._v("e")]),a("mi",[s._v("s")]),a("mi",[s._v("u")]),a("mi",[s._v("l")]),a("mi",[s._v("t")]),a("mtext")],1)],1)],1),a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow",[a("mrow"),a("mo",[s._v("=")]),a("mtext"),a("mn",[s._v("0000")]),a("mtext"),a("mn",[s._v("1111")]),a("mtext"),a("mo",[s._v("+")]),a("mtext"),a("mn",[s._v("0000")]),a("mtext"),a("mn",[s._v("0001")]),a("mtext"),a("mo",[s._v("=")]),a("mtext"),a("mn",[s._v("16")])],1)],1)],1)],1)],1),a("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("\\begin{aligned}\nn\\ &=\\ 0000\\ 1001\\\\\n\\downarrow\\\\\nn\\ \\text{>>>}\\ 1\\ &=\\ 0000\\ 0100\\\\\nn\\ |\\ n\\ \\text{>>>}\\ 1\\ &=\\ 0000\\ 1101\\\\\nn\\ &=\\ 0000\\ 1101\\\\\n\\downarrow\\\\\nn\\ \\text{>>>}\\ 2\\ &=\\ 0000\\ 0011\\\\\nn\\ |\\ n\\ \\text{>>>}\\ 2\\ &=\\ 0000\\ 1111\\\\\nn\\ &=\\ 0000\\ 1111\\\\\n\\downarrow\\\\\nn\\ \\text{>>>}\\ 4\\ &=\\ 0000\\ 0000\\\\\nn\\ |\\ n\\ \\text{>>>}\\ 4\\ &=\\ 0000\\ 1111\\\\\nn\\ &=\\ 0000\\ 1111\\\\\n\\downarrow\\\\\nn\\ \\text{>>>}\\ 8\\ &=\\ 0000\\ 0000\\\\\nn\\ |\\ n\\ \\text{>>>}\\ 8\\ &=\\ 0000\\ 1111\\\\\nn\\ &=\\ 0000\\ 1111\\\\\nresult\\ &=\\ 0000\\ 1111\\ +\\ 0000\\ 0001\\ =\\ 16\n\\end{aligned}\n")])],1)],1)],1),a("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[a("span",{staticClass:"base"},[a("span",{staticClass:"strut",staticStyle:{height:"27em","vertical-align":"-13.25em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mtable"},[a("span",{staticClass:"col-align-r"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"13.75em"}},[a("span",{staticStyle:{top:"-15.91em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathnormal"},[s._v("n")]),a("span",{staticClass:"mspace"})])]),a("span",{staticStyle:{top:"-14.41em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mrel"},[s._v("↓")])])]),a("span",{staticStyle:{top:"-12.91em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathnormal"},[s._v("n")]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mord text"},[a("span",{staticClass:"mord"},[s._v(">>>")])]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mord"},[s._v("1")]),a("span",{staticClass:"mspace"})])]),a("span",{staticStyle:{top:"-11.41em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathnormal"},[s._v("n")]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mord"},[s._v("∣")]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mord mathnormal"},[s._v("n")]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mord text"},[a("span",{staticClass:"mord"},[s._v(">>>")])]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mord"},[s._v("1")]),a("span",{staticClass:"mspace"})])]),a("span",{staticStyle:{top:"-9.91em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathnormal"},[s._v("n")]),a("span",{staticClass:"mspace"})])]),a("span",{staticStyle:{top:"-8.409999999999998em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mrel"},[s._v("↓")])])]),a("span",{staticStyle:{top:"-6.909999999999998em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathnormal"},[s._v("n")]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mord text"},[a("span",{staticClass:"mord"},[s._v(">>>")])]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mord"},[s._v("2")]),a("span",{staticClass:"mspace"})])]),a("span",{staticStyle:{top:"-5.409999999999998em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathnormal"},[s._v("n")]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mord"},[s._v("∣")]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mord mathnormal"},[s._v("n")]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mord text"},[a("span",{staticClass:"mord"},[s._v(">>>")])]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mord"},[s._v("2")]),a("span",{staticClass:"mspace"})])]),a("span",{staticStyle:{top:"-3.9099999999999984em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathnormal"},[s._v("n")]),a("span",{staticClass:"mspace"})])]),a("span",{staticStyle:{top:"-2.4099999999999984em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mrel"},[s._v("↓")])])]),a("span",{staticStyle:{top:"-0.9099999999999988em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathnormal"},[s._v("n")]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mord text"},[a("span",{staticClass:"mord"},[s._v(">>>")])]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mord"},[s._v("4")]),a("span",{staticClass:"mspace"})])]),a("span",{staticStyle:{top:"0.589999999999999em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathnormal"},[s._v("n")]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mord"},[s._v("∣")]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mord mathnormal"},[s._v("n")]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mord text"},[a("span",{staticClass:"mord"},[s._v(">>>")])]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mord"},[s._v("4")]),a("span",{staticClass:"mspace"})])]),a("span",{staticStyle:{top:"2.089999999999999em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathnormal"},[s._v("n")]),a("span",{staticClass:"mspace"})])]),a("span",{staticStyle:{top:"3.589999999999999em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mrel"},[s._v("↓")])])]),a("span",{staticStyle:{top:"5.09em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathnormal"},[s._v("n")]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mord text"},[a("span",{staticClass:"mord"},[s._v(">>>")])]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mord"},[s._v("8")]),a("span",{staticClass:"mspace"})])]),a("span",{staticStyle:{top:"6.59em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathnormal"},[s._v("n")]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mord"},[s._v("∣")]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mord mathnormal"},[s._v("n")]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mord text"},[a("span",{staticClass:"mord"},[s._v(">>>")])]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mord"},[s._v("8")]),a("span",{staticClass:"mspace"})])]),a("span",{staticStyle:{top:"8.09em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathnormal"},[s._v("n")]),a("span",{staticClass:"mspace"})])]),a("span",{staticStyle:{top:"9.59em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathnormal"},[s._v("res")]),a("span",{staticClass:"mord mathnormal"},[s._v("u")]),a("span",{staticClass:"mord mathnormal"},[s._v("lt")]),a("span",{staticClass:"mspace"})])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"13.25em"}},[a("span")])])])]),a("span",{staticClass:"col-align-l"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"13.75em"}},[a("span",{staticStyle:{top:"-15.91em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"}),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mrel"},[s._v("=")]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mord"},[s._v("0000")]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mord"},[s._v("1001")])])]),a("span",{staticStyle:{top:"-12.91em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"}),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mrel"},[s._v("=")]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mord"},[s._v("0000")]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mord"},[s._v("0100")])])]),a("span",{staticStyle:{top:"-11.41em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"}),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mrel"},[s._v("=")]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mord"},[s._v("0000")]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mord"},[s._v("1101")])])]),a("span",{staticStyle:{top:"-9.91em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"}),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mrel"},[s._v("=")]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mord"},[s._v("0000")]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mord"},[s._v("1101")])])]),a("span",{staticStyle:{top:"-6.909999999999998em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"}),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mrel"},[s._v("=")]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mord"},[s._v("0000")]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mord"},[s._v("0011")])])]),a("span",{staticStyle:{top:"-5.409999999999998em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"}),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mrel"},[s._v("=")]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mord"},[s._v("0000")]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mord"},[s._v("1111")])])]),a("span",{staticStyle:{top:"-3.9099999999999984em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"}),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mrel"},[s._v("=")]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mord"},[s._v("0000")]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mord"},[s._v("1111")])])]),a("span",{staticStyle:{top:"-0.9099999999999984em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"}),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mrel"},[s._v("=")]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mord"},[s._v("0000")]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mord"},[s._v("0000")])])]),a("span",{staticStyle:{top:"0.5899999999999999em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"}),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mrel"},[s._v("=")]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mord"},[s._v("0000")]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mord"},[s._v("1111")])])]),a("span",{staticStyle:{top:"2.09em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"}),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mrel"},[s._v("=")]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mord"},[s._v("0000")]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mord"},[s._v("1111")])])]),a("span",{staticStyle:{top:"5.09em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"}),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mrel"},[s._v("=")]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mord"},[s._v("0000")]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mord"},[s._v("0000")])])]),a("span",{staticStyle:{top:"6.59em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"}),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mrel"},[s._v("=")]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mord"},[s._v("0000")]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mord"},[s._v("1111")])])]),a("span",{staticStyle:{top:"8.09em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"}),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mrel"},[s._v("=")]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mord"},[s._v("0000")]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mord"},[s._v("1111")])])]),a("span",{staticStyle:{top:"9.59em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"}),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mrel"},[s._v("=")]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mord"},[s._v("0000")]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mord"},[s._v("1111")]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),a("span",{staticClass:"mbin"},[s._v("+")]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),a("span",{staticClass:"mord"},[s._v("0000")]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mord"},[s._v("0001")]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mrel"},[s._v("=")]),a("span",{staticClass:"mspace"}),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mord"},[s._v("16")])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"13.25em"}},[a("span")])])])])])])])])])])]),s._v(" "),a("h2",{attrs:{id:"hashmap-如何扩容"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hashmap-如何扩容"}},[s._v("#")]),s._v(" HashMap 如何扩容？"),a("Badge",{attrs:{text:"重点",type:"error"}})],1),s._v(" "),a("p",[a("code",[s._v("HashMap")]),s._v(" 调用 "),a("code",[s._v("resize()")]),s._v(" 函数对容量进行调整，流程如下：")]),s._v(" "),a("div",{staticClass:"custom-block center"},[a("p",[a("img",{attrs:{src:"https://i.loli.net/2021/07/29/AbhYXIBnQ2ZRC4V.png",alt:"resize流程图.jpg"}})])]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("HashMap 的懒加载")]),s._v(" "),a("p",[s._v("调用构造器的时候不会初始化 "),a("code",[s._v("table")]),s._v(" 数组和设定阈值，是在调用 "),a("code",[s._v("put()")]),s._v(" 方法的时候调用的 "),a("code",[s._v("resize()")]),s._v(" 方法。")])]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("加载因子设置为 0.75 的意义")]),s._v(" "),a("p",[s._v("如果小于 0.5，空着一半就扩容了，空间肯定会很浪费；如果是 1 的话，只能说有超级大的概率，会发生碰撞，这不符合 "),a("code",[s._v("HashMap")]),s._v(" 的初衷。既然已经设置了 "),a("code",[s._v("table")]),s._v(" 的长度为 16，那么负载因子其实并不重要，重要的其实是那个阈值，毕竟加载因子也是为了计算阈值的。某个数乘 16 需要得到一个整数，那么 0.75 就很合适。")])]),s._v(" "),a("h2",{attrs:{id:"hashmap-put-方法的逻辑是什么"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hashmap-put-方法的逻辑是什么"}},[s._v("#")]),s._v(" HashMap put 方法的逻辑是什么？"),a("Badge",{attrs:{text:"重点",type:"error"}})],1),s._v(" "),a("div",{staticClass:"custom-block center"},[a("p",[a("img",{attrs:{src:"https://i.loli.net/2021/07/29/dZGOl8RjxuaTmeX.png",alt:"put流程图.jpg"}})])]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("红黑树与链表的互相转化")]),s._v(" "),a("p",[s._v("不是说满足大于 8 的条件链表就一定会转换为红黑树，还需要判断桶的数量是否大于 64。原因在于：如果桶的数量不够多，但还是冲突了，那么就算转换为了红黑树，实际上依然不能解决问题。")])]),s._v(" "),a("h2",{attrs:{id:"hashmap-get-方法的逻辑是什么"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hashmap-get-方法的逻辑是什么"}},[s._v("#")]),s._v(" HashMap get 方法的逻辑是什么？"),a("Badge",{attrs:{text:"重点",type:"error"}})],1),s._v(" "),a("div",{staticClass:"custom-block center"},[a("p",[a("img",{attrs:{src:"https://i.loli.net/2021/07/29/pbfuvYxEtRG14CZ.png",alt:"get流程图.jpg"}})])]),s._v(" "),a("h2",{attrs:{id:"hashmap-与-hashtable-的比较"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hashmap-与-hashtable-的比较"}},[s._v("#")]),s._v(" HashMap 与 HashTable 的比较？")]),s._v(" "),a("ul",[a("li",[s._v("不保证线程安全")]),s._v(" "),a("li",[s._v("允许键和值为 "),a("code",[s._v("null")])]),s._v(" "),a("li",[s._v("迭代器是 fail-fast 迭代器")]),s._v(" "),a("li",[s._v("不保证随着时间的推移 "),a("code",[s._v("Map")]),s._v(" 中的元素次序是不变的")]),s._v(" "),a("li",[a("code",[s._v("HashMap")]),s._v(" 会做红黑树的转换")])]),s._v(" "),a("h2",{attrs:{id:"hashmap-的线程不安全性体现在哪里"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hashmap-的线程不安全性体现在哪里"}},[s._v("#")]),s._v(" HashMap 的线程不安全性体现在哪里？"),a("Badge",{attrs:{text:"重点",type:"error"}})],1),s._v(" "),a("ul",[a("li",[s._v("如果多个线程计算键的 "),a("code",[s._v("hash")]),s._v(" 是在同一位置，多次执行 "),a("code",[s._v("put")]),s._v(" 操作可能会将数据覆盖")]),s._v(" "),a("li",[a("code",[s._v("resize()")]),s._v(" 方法中调用的 "),a("code",[s._v("transfer()")]),s._v(" 方法可能会使链表产生环（JDK7 采用头插法会有这个问题，JDK8 采用尾插法不会有这个问题）")])])])}),[],!1,null,null,null);t.default=i.exports}}]);