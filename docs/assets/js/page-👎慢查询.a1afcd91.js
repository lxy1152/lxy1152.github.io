(window.webpackJsonp=window.webpackJsonp||[]).push([[56],{759:function(_,v,l){"use strict";l.r(v);var t=l(1),i=Object(t.a)({},(function(){var _=this,v=_.$createElement,l=_._self._c||v;return l("ContentSlotsDistributor",{attrs:{"slot-key":_.$parent.slotKey}},[l("h2",{attrs:{id:"mysql-什么情况会造成慢查询-如何查看慢查询日志"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#mysql-什么情况会造成慢查询-如何查看慢查询日志"}},[_._v("#")]),_._v(" Mysql 什么情况会造成慢查询，如何查看慢查询日志？")]),_._v(" "),l("p",[_._v("响应时间超过阈值会产生慢查询日志，一般以下情况会造成查询慢：")]),_._v(" "),l("ul",[l("li",[_._v("没有设置索引，或查询没有用到索引")]),_._v(" "),l("li",[_._v("I/O 吞吐量过小")]),_._v(" "),l("li",[_._v("内存不足")]),_._v(" "),l("li",[_._v("网络速度慢")]),_._v(" "),l("li",[_._v("查询的数据量过大")]),_._v(" "),l("li",[_._v("锁或者死锁")]),_._v(" "),l("li",[_._v("返回了不必要的行或列")]),_._v(" "),l("li",[_._v("查询语句存在问题，需要优化")])]),_._v(" "),l("p",[_._v("慢查询日志默认是关闭的，如果非必要，不要开启，会影响性能。使用 "),l("code",[_._v("SHOW VARIABLES LIKE 'slow_query%'")]),_._v(" 查询得到：")]),_._v(" "),l("ul",[l("li",[_._v("slow_query_log：是否开启慢查询日志")]),_._v(" "),l("li",[_._v("slow_query_log_file：慢查询日志存储位置")])]),_._v(" "),l("h2",{attrs:{id:"如何解决慢查询"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#如何解决慢查询"}},[_._v("#")]),_._v(" 如何解决慢查询？")]),_._v(" "),l("ul",[l("li",[_._v("把数据、日志、索引放到不同的 I/O 设备上，增加读取速度")]),_._v(" "),l("li",[_._v("纵向、横向分割表，减少表的尺寸")]),_._v(" "),l("li",[_._v("升级硬件")]),_._v(" "),l("li",[_._v("根据查询条件，建立索引，索引优化")]),_._v(" "),l("li",[_._v("提高网速")]),_._v(" "),l("li",[_._v("扩大服务器内存")]),_._v(" "),l("li",[_._v("分库分表")])]),_._v(" "),l("h2",{attrs:{id:"数据库优化的方式有哪些"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#数据库优化的方式有哪些"}},[_._v("#")]),_._v(" 数据库优化的方式有哪些？")]),_._v(" "),l("ul",[l("li",[_._v("排除缓存的干扰")]),_._v(" "),l("li",[_._v("通过 explain 获取执行计划")]),_._v(" "),l("li",[_._v("使用覆盖索引")]),_._v(" "),l("li",[_._v("使用联合索引")]),_._v(" "),l("li",[_._v("最左匹配原则\n在模糊查询中如果使用 xx% 的形式还是能够利用索引的。")]),_._v(" "),l("li",[_._v("使用前缀索引")]),_._v(" "),l("li",[_._v("不要在条件中使用函数")]),_._v(" "),l("li",[_._v("不要使用隐式类型转换")])]),_._v(" "),l("div",{staticClass:"custom-block tip"},[l("p",{staticClass:"custom-block-title"},[_._v("MySQL 的缓存")]),_._v(" "),l("p",[_._v("MySQL 8 之前版本的数据库是存在缓存的，如果当前的 MySQL 支持缓存同时也开启了缓存，那每次请求的查询语句和结果都会以 key-value 的形式进行缓存，在查询时会优先查找缓存，但只要数据一更新，缓存就会失效，所以缓存的用处并不大。在 "),l("code",[_._v("select")]),_._v(" 语句上添加 "),l("code",[_._v("sql_no_cache")]),_._v(" 可以避免使用缓存。")])])])}),[],!1,null,null,null);v.default=i.exports}}]);