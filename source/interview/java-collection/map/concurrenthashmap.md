---
title: ğŸ§˜ ConcurrentHashMap
---

## ConcurrentHashMap çš„åº•å±‚å­˜å‚¨ç»“æ„ï¼Ÿ

JDK7 ä¸­ä½¿ç”¨ `Segment` æ•°ç»„å’Œ `HashEntry` æ•°ç»„ï¼ŒJDK8 ä¸­ä½¿ç”¨æ•°ç»„ + é“¾è¡¨ + çº¢é»‘æ ‘ã€‚

## ConcurrentHashMap æ˜¯å¦‚ä½•ä¿è¯çº¿ç¨‹å®‰å…¨çš„ï¼Ÿ<Badge text="é‡ç‚¹" type="error"/>

åœ¨ JDK7 ä¸­ä½¿ç”¨åˆ†æ®µé”æœºåˆ¶ï¼ˆSegmentï¼‰ä¿è¯çº¿ç¨‹å®‰å…¨ã€‚æ¯ä¸ªåˆ†æ®µé”ç»´æŠ¤ç€å‡ ä¸ªæ¡¶ï¼Œå¤šä¸ªçº¿ç¨‹å¯ä»¥åŒæ—¶è®¿é—®ä¸åŒåˆ†æ®µé”ä¸Šçš„æ¡¶ï¼Œä»è€Œä½¿å¹¶å‘åº¦ï¼ˆåˆ†æ®µé”çš„ä¸ªæ•°ï¼‰æ›´é«˜ã€‚é»˜è®¤å¹¶å‘åº¦æ˜¯ 16ã€‚

:::center
![segment](https://camo.githubusercontent.com/611426fd924e7331fc19768e939456311e3d908fbb76d2441b489b976521399d/687474703a2f2f626c6f672d696d672e636f6f6c73656e2e636e2f696d672f436f6e63757272656e74486173684d61702d6a646b312e372e706e67)
:::

åœ¨ JDK8 ä¸­ï¼Œ`ConcurrentHashMap` çš„ç»“æ„ä¸ `HashMap` ç›¸åŒï¼Œä½†æ˜¯ä½¿ç”¨äº† CAS å’Œ `synchronized`ï¼ˆåªé”å®šå½“å‰é“¾è¡¨æˆ–çº¢é»‘æ ‘çš„å¤´èŠ‚ç‚¹ï¼Œè¿™æ ·åªè¦å“ˆå¸Œä¸å†²çªï¼Œå°±ä¸ä¼šäº§ç”Ÿå¹¶å‘ï¼‰æ¥ä¿è¯çº¿ç¨‹å®‰å…¨ã€‚

:::center
![](https://camo.githubusercontent.com/cc65641c880bbab590dab143b848896d814638974c591c0f29f534284d046a6c/687474703a2f2f626c6f672d696d672e636f6f6c73656e2e636e2f696d672f436f6e63757272656e74486173684d61702d6a646b312e382d32706e672e706e67)
:::
